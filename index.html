<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Event Attendance</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
<style>
body {
  font-family: Arial, sans-serif;
}

#event-selection {
  margin-bottom: 1rem;
}

.attendee-list {
  margin-bottom: 1rem;
}

.attendee {
  display: flex;
  align-items: center;
  margin-bottom: 0.5rem;
}

.attendee-name {
  width: 150px;
  font-weight: bold;
}

.attendee-checkbox {
  margin-left: 10px;
}

</style>
</head>
<body>
  <div id="event-selection"></div>
  <div id="attendee-list"></div>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCTVf7UuZYlMfiRRdF3aOZlipVgGwWntsM",
    authDomain: "acdcboybasketball.firebaseapp.com",
    databaseURL: "https://acdcboybasketball-default-rtdb.firebaseio.com",
    projectId: "acdcboybasketball",
    storageBucket: "acdcboybasketball.appspot.com",
    messagingSenderId: "488795731492",
    appId: "1:488795731492:web:4d20b1644c27f85388cab1"
  };

  const firebaseApp = firebase.initializeApp(firebaseConfig);
  const database = firebaseApp.database();

  const events = [
  { name: "U16 Spring Jam Sioux Falls", date: "April 22-23", deadline: "2023-04-20 23:59" },
  { name: "USF Team Sioux Falls", date: "June 17-18", deadline: "2023-06-15 23:59" },
  { name: "U16 Summer Classic Sioux Falls", date: "July 21-23", deadline: "2023-07-19 23:59" },
  { name: "Hardknockers Rapid City", date: "July 28-29", deadline: "2023-07-26 23:59" }
];

  const attendees = [
    "Sabas", "Hunter", "Anaias", "Peter", "Garth", "Ryder", "Tyson", "Jamian", "Ethan", "Isaiah", "AJ", "Ty", "Justin", "Koda", "Tate", "Kashton"
  ];

  function updateAttendance(eventIndex, attendeeIndex, attending) {
    const eventRef = database.ref(`events/${eventIndex}/${attendeeIndex}`);
    eventRef.set(attending);
  }

  function renderEventSelection() {
   const deadlineText = document.createElement("p");
  eventSelection.appendChild(deadlineText);

  select.addEventListener("change", () => {
    renderAttendeeList(select.selectedIndex);
    deadlineText.textContent = `Deadline: ${events[select.selectedIndex].deadline}`;
  }); 
const eventSelection = document.getElementById("event-selection");
    eventSelection.innerHTML = "";

    const select = document.createElement("select");
    select.addEventListener("change", () => {
      renderAttendeeList(select.selectedIndex);
    });

    const defaultOption = document.createElement("option");
    defaultOption.textContent = "Select an event";
    defaultOption.disabled = true;
    defaultOption.selected = true;
    select.appendChild(defaultOption);

    events.forEach((event, index) => {
      const option = document.createElement("option");
      option.textContent = `${event.name} (${event.date})`;
      option.value = index;
      select.appendChild(option);
    });

    eventSelection.appendChild(select);
  }

  function renderAttendeeList(eventIndex) {
  const attendeeList = document.getElementById("attendee-list");
  attendeeList.innerHTML = "";

  attendees.forEach((attendee, attendeeIndex) => {
   const deadline = new Date(events[eventIndex].deadline);
  const now = new Date();

  attendees.forEach((attendee, attendeeIndex) => { 
checkbox.disabled = now > deadline;
const attendeeDiv = document.createElement("div");
    attendeeDiv.classList.add("attendee");

    const attendeeName = document.createElement("span");
    attendeeName.classList.add("attendee-name");
    attendeeName.textContent = attendee;
    attendeeDiv.appendChild(attendeeName);

    const attendeeCheckbox = document.createElement("input");
    attendeeCheckbox.type = "checkbox";
    attendeeCheckbox.classList.add("attendee-checkbox");
    attendeeCheckbox.addEventListener("change", (event) => {
      updateAttendance(eventIndex, attendeeIndex, event.target.checked);
    });
    attendeeDiv.appendChild(attendeeCheckbox);

    // Load saved attendance information from Firebase
    const eventRef = database.ref(`events/${eventIndex}/${attendeeIndex}`);
    eventRef.on("value", (snapshot) => {
      attendeeCheckbox.checked = snapshot.val() || false;
    });

    attendeeList.appendChild(attendeeDiv);
  });
}


  renderEventSelection();

</script>
</body>
</html>

